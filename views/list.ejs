<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Siswa</title>
</head>

<body>
  <script>
    function homePage() {
      window.location = '/';
    }
  </script>
  <style>
    h1,
    h2 {
      font-family: arial, sans-serif;
      margin-left: 24px;
    }

    label {
      padding: 4px 4px 4px 4px;

    }

    input {
      font-family: arial, sans-serif;
      width: 95%;
      padding: 9px;
      border: 1px solid #ccc;
      border-radius: 3px;
      resize: vertical;
    }

    input[type=checkbox] {

      margin-top: 10px;
      width: 15%;
      padding: 3px;
      border: 1px solid #ccc;
      border-radius: 3px;
      resize: vertical;
    }

    select {
      background-color: white;
      border: 1px solid #ccc;
      width: 97%;
      border-radius: 4px;
      display: inline-block;
      font-family: arial, sans-serif;
      line-height: 25px;
      padding: 7px;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-appearance: none;
      -moz-appearance: none;
      resize: vertical;
    }

    select.arrows {
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA3klEQVRIS+3VMU9CMRTF8d8zBL+aizoQFhx0kUk33RzdYMNFXUFnYeGrYYyaJiUxJHDLSxodbNKpfeffc9/pbaPyaCrr+3OA++z4rtT5Pg5GuMnCY9yWQEoBE1xhlUUP8YDrCBIB0vojLvGO0yz4hm4JJAKcYYoPHGOZAUdYoIMBXrc5iQAHeMlzviFygj7O8dkWEJU4XI8chALRhn9AVKHf70VRTHu4wFfbmKZLNKt50dLBnna0imcMd/2I0phWa3Y/D1e1Xa9BCZJG0VuQNpaWKMx72xS1Fl5/WN3BN+AgJhnZQlq4AAAAAElFTkSuQmCC');
      background-position: calc(100% - .5rem), 100% 0;
      background-size: 25px 25px;
      background-repeat: no-repeat;
    }

    select.arrows:focus {
      border-color: blue;
      outline: 0;
    }

    .row:after {
      content: "";
      display: table;
      clear: both;
    }

    .col-25 {
      float: left;
      width: 10%;
      margin-top: 6px;
    }

    .col-75 {
      float: left;
      width: 90%;
      margin-top: 6px;
    }

    .date {
      width: 25%;
      padding: 9px;
      border: 1px solid #ccc;
      border-radius: 3px;
      resize: vertical;
    }

    .button {
      border: none;
      color: white;
      padding: 8px 16px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      cursor: pointer;
    }

    .button1 {
      background-color: #006e04;
      border-radius: 6px;
    }

    .button2 {
      background-color: #ff0000;
      border-radius: 6px;
    }

    .button3 {
      background-color: blue;
      border-radius: 6px;
    }
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td,
    th {
      border-bottom: 1px solid #dddddd;
      text-align: left;
      padding: 8px
    }

    tr:nth-child(odd) {
      background-color: #f2f2f2;
      border-collapse: collapse;

    }

    th {
      background-color: #ffffff;
    }

    pagination {
      display: inline-block;
    }

    .pagination a {
      font-family: arial, sans-serif;
      color: rgb(0, 119, 255);
      float: left;
      padding: 8px 16px;
      text-decoration: none;
      transition: background-color .3s;
      border: 1px solid #ddd;
    }

    .pagination a.active {
      background-color: rgb(0, 191, 255);
      color: white;
      border: 1px solid rgb(0, 191, 255);
    }

    .pagination a:hover:not(.active) {
      background-color: #ddd;
    }
  </style>
  <h1>BREAD (Browse, Read, Edit, Add, Delete)</h1>
  <h2>Filters</h2>
  <form action="" method="get">
    <div class="row">
      <div class="col-25">
        <input type="checkbox" id="idCB" name="idCB" <%=query.idCB ? 'checked' : null %>>ID
      </div>
      <div class="col-75">
        <input type="number" id="id" name="id" placeholder="ID" value="<%= query.idCB ? query.id : '' %>"><br>
      </div>
    </div>

    <div class="row">
      <div class="col-25">
        <input type="checkbox" id="stringCB" name="stringCB" <%=query.stringCB ? 'checked' : null %>>String
      </div>
      <div class="col-75">
        <input type="text" id="string" name="string" placeholder="String"
          value="<%= query.stringCB ? query.string : '' %>"><br>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <input type="checkbox" id="integerCB" name="integerCB" <%=query.integerCB ? 'checked' : null %>>Integer
      </div>
      <div class="col-75">
        <input type="number" id="integer" name="integer" placeholder="Integer"
          value="<%= query.integerCB ? query.integer : '' %>"><br>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <input type="checkbox" id="floatCB" name="floatCB" <%=query.floatCB ? 'checked' : null %>>Float
      </div>
      <div class="col-75">
        <input type="number" step="any" id="float" name="float" placeholder="Float"
          value="<%= query.floatCB ? query.float : '' %>"><br>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <input type="checkbox" id="dateCB" name="dateCB" <%=query.dateCB ? 'checked' : null %>>Date
      </div>
      <div class="col-75">
        <input type="date" class="date" id="StartDate" name="StartDate" placeholder="Start Date"
          value="<%= query.dateCB ? query.StartDate : '' %>"><br>
        <p>to</p>
        <input type="date" class="date" id="EndDate" name="EndDate" placeholder="End Date"
          value="<%= query.dateCB ? query.EndDate : '' %>">
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <input type="checkbox" id="booleanCB" name="booleanCB" <%=query.booleanCB ? 'checked' : null %>>Boolean
      </div>
      <div class="col-75">
        <select class="arrows" name="boolean" id="boolean"
          value="<%= query.booleanCB ? query.boolean : query.boolean = '' %>">
          <option disabled <%=query.boolean=='' ? 'selected' : null %>>Choose the boolean..</option>
          <option value="false" <%=query.boolean=='false' ? 'selected' : null %>>False</option>
          <option value="true" <%=query.boolean=='true' ? 'selected' : null %>>True</option>
        </select>
      </div>
    </div>
    <br>
    <button class="button button3" type="submit">Search</button>
  </form>
  <div id="pagination"></div>
  <br>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>String</th>
        <th>Integer</th>
        <th>Float</th>
        <th>Date</th>
        <th>Boolean</th>
        <th colspan="2">Action</th>
      </tr>
    </thead>
    <tbody>
      <% rows.forEach((item)=> { %>
        <tr>
          <td>
            <%= item.id %>
          </td>
          <td>
            <%= item.string %>
          </td>
          <td>
            <%= item.integerinput %>
          </td>
          <td>
            <%= item.floatinput %>
          </td>
          <td>
            <%= item.dateinput %>
          </td>
          <td>
            <%= item.booleaninput %>
          </td>
          <td>
            <button class="button button1" onclick="location.href='/edit/<%= item.id %>';">Edit</button>
            <button class="button button2" onclick="location.href='/delete/<%= item.id %>';">Delete</button>
          </td>
        </tr>
        <% }) %>
    </tbody>
  </table>
  <br>
      <div class="pagination">
        <a
          href="<%= currentPage == 1 ? currentUrl : currentUrl.includes(`&page=${currentPage}`) ? currentUrl.replace(`&page=${currentPage}`, `&page=${(currentPage - 1)}`) : `/?page=${(currentPage - 1)}` %>">Previous</a>
        <% for (let i=1; i <=page; i++) { %>
          <a 
            href="<%= currentUrl.includes(`&page=${currentPage}`) ? currentUrl.replace(`&page=${currentPage}`, `&page=${i}`) : `/?page=${i}` %>" class=<%= currentPage == i ? 'active' : null %>> 
            <%= i %>
          </a>
          <% } %>
            <a 
              href="<%= currentPage == page ? currentUrl : currentUrl.includes(`&page=${currentPage}`) ? currentUrl.replace(`&page=${currentPage}`, `&page=${(currentPage + 1)}`) : `/?page=${(currentPage + 1)}` %>">Next</a>
      </div>
      <br>
      <br>
      <br>
      <button class="button button3" onclick="location.href='/add';">Add</button><br>
</body>
</html>